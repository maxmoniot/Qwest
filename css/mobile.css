/* ============================================
   MOBILE - Responsive Design
   ============================================ */

/* ========================================
   TABLETS (768px et moins)
   ======================================== */

@media (max-width: 768px) {
    /* Typography */
    .app-title {
        font-size: 48px;
    }
    
    .app-subtitle {
        font-size: 16px;
    }
    
    /* Home */
    #quiz-code-input {
        font-size: 20px;
        padding: var(--space-md);
    }
    
    #join-btn {
        font-size: 18px;
    }
    
    /* Header */
    .header {
        flex-direction: column;
        align-items: stretch;
    }
    
    .header-left,
    .header-right {
        width: 100%;
    }
    
    .header-right {
        justify-content: stretch;
    }
    
    .header-right button {
        flex: 1;
    }
    
    /* Toolbar */
    .toolbar {
        flex-direction: column;
        align-items: stretch;
    }
    
    .toolbar-section {
        flex-direction: column;
        align-items: stretch;
        gap: var(--space-sm);
    }
    
    .toolbar-section input[type="number"] {
        width: 100%;
    }
    
    .toolbar-section .btn-small {
        width: 100%;
    }
    
    .btn-add-question {
        width: 100%;
    }
    
    /* Réorganisation de la toolbar en mobile */
    .toolbar {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--space-sm);
    }
    
    .toolbar-section {
        grid-column: 1 / 3;
        display: contents; /* Pour permettre aux enfants de se placer dans la grille parente */
    }
    
    .btn-add-question {
        grid-column: 1;
        grid-row: 1;
        width: 100%;
    }
    
    #pilot-btn {
        grid-column: 2;
        grid-row: 1;
        width: 100%;
        margin: 0 !important;
    }
    
    .question-count {
        grid-column: 1 / 3;
        grid-row: 2;
        text-align: center;
    }
    
    .btn-history {
        width: 100%;
    }
    
    #undo-btn {
        grid-column: 1;
        grid-row: 3;
    }
    
    #redo-btn {
        grid-column: 2;
        grid-row: 3;
    }
    
    /* Question card */
    .question-card {
        display: grid;
        grid-template-columns: 50px 1fr;
        grid-template-rows: auto auto;
        gap: var(--space-xs);
        padding: var(--space-xs);
        align-items: stretch;
    }
    
    .question-card-left {
        grid-column: 1;
        grid-row: 1 / 3;
        display: flex;
        flex-direction: column;
        gap: 2px;
    }
    
    .btn-move-up,
    .btn-move-down {
        flex: 1;
        width: 100%;
        font-size: 18px;
        min-height: 0;
    }
    
    .question-card-center {
        grid-column: 2;
        grid-row: 1;
        display: flex;
        flex-direction: column;
        gap: 4px;
        min-width: 0;
    }
    
    .question-card-right {
        grid-column: 2;
        grid-row: 2;
        display: flex;
        flex-direction: row;
        gap: var(--space-xs);
    }
    
    .question-card-right .btn-action {
        flex: 1;
        height: 44px;
        font-size: 14px;
        min-width: 0;
    }
    
    /* Drag & Drop */
    .question-card.dragging {
        opacity: 0.9;
        box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        cursor: grabbing;
        transition: none;
        z-index: 1000;
        pointer-events: none;
    }
    
    .question-card-placeholder {
        background: var(--primary-light);
        border: 2px dashed var(--primary);
        border-radius: var(--radius-lg);
        transition: all 0.2s ease;
    }
    
    /* Modals */
    .modal {
        padding: var(--space-sm);
    }
    
    .modal-content {
        max-height: 95vh;
    }
    
    .modal-footer {
        flex-direction: column-reverse;
    }
    
    .modal-footer button {
        width: 100%;
    }
    
    /* Question types grid */
    .question-type-grid {
        grid-template-columns: 1fr;
    }
    
    /* Animal grid - adaptation mobile */
    .animal-grid {
        grid-template-columns: 1fr;
        gap: var(--space-md);
    }
    
    .animal-btn {
        padding: var(--space-md);
        width: 100%;
    }
    
    .animal-emoji {
        font-size: 40px;
    }
    
    .animal-name {
        font-size: 16px;
    }
    
    /* Codes */
    .code-display {
        flex-direction: column;
    }
    
    .code-display button {
        width: 100%;
    }
}

/* ========================================
   MOBILE PHONES (480px et moins)
   ======================================== */

@media (max-width: 480px) {
    /* Typography */
    .app-title {
        font-size: 36px;
    }
    
    .app-subtitle {
        font-size: 14px;
    }
    
    /* Countdown screen - centrage mobile */
    .countdown-screen {
        padding: var(--space-lg);
        text-align: center;
    }
    
    .countdown-screen h2 {
        font-size: 32px;
    }
    
    .countdown-number {
        font-size: 80px;
    }
    
    /* Spacing */
    .home-container,
    .create-container {
        padding: var(--space-md);
    }
    
    /* Input */
    #quiz-code-input {
        font-size: 18px;
        letter-spacing: 2px;
    }
    
    /* Headers */
    .header h2 {
        font-size: 18px;
    }
    
    .modal-header h3 {
        font-size: 18px;
    }
    
    /* Question card */
    .question-header {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .question-text {
        font-size: 14px;
    }
    
    /* Buttons */
    button {
        font-size: 14px !important;
    }
    
    .btn-primary,
    .btn-secondary {
        padding: var(--space-md);
    }
    
    /* Answer editor */
    .answer-row {
        flex-direction: column;
        align-items: stretch;
    }
    
    .answer-checkbox {
        width: 100%;
        justify-content: flex-start;
    }
}

/* ========================================
   LANDSCAPE MODE (Téléphones en paysage)
   ======================================== */

@media (max-height: 500px) and (orientation: landscape) {
    .home-container {
        padding: var(--space-md);
    }
    
    .logo-container {
        margin-bottom: var(--space-md);
    }
    
    .app-title {
        font-size: 32px;
    }
    
    .app-subtitle {
        font-size: 12px;
    }
    
    .code-input-container {
        padding: var(--space-md);
    }
    
    .modal-content {
        max-height: 98vh;
    }
}

/* ========================================
   TOUCH OPTIMIZATIONS
   ======================================== */

@media (hover: none) and (pointer: coarse) {
    /* Augmenter les zones de toucher */
    button {
        min-height: 44px;
    }
    
    .btn-icon {
        width: 44px;
        height: 44px;
    }
    
    input,
    textarea,
    select {
        min-height: 44px;
    }
    
    /* Désactiver les effets hover sur mobile */
    *:hover {
        transform: none !important;
    }
    
    /* Feedback tactile */
    button:active {
        transform: scale(0.95);
    }
}

/* ========================================
   PRINT (Impression)
   ======================================== */

@media print {
    body {
        background: white;
    }
    
    .header-right,
    .toolbar,
    .question-actions,
    .modal,
    button {
        display: none !important;
    }
    
    .question-card {
        page-break-inside: avoid;
        border: 1px solid #000;
        box-shadow: none;
    }
}

/* ========================================
   DARK MODE (Préférence système)
   ======================================== */

@media (prefers-color-scheme: dark) {
    /* Optionnel : Implémenter un thème sombre
       Pour l'instant on garde le thème clair */
}

/* ========================================
   REDUCED MOTION (Accessibilité)
   ======================================== */

@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
